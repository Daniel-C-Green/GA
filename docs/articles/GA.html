<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A quick tour of GA • GA</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">GA</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/GA.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>A quick tour of GA</h1>
                        <h4 class="author">Luca Scrucca</h4>
            
            <h4 class="date">17 Feb 2018</h4>
          </div>

    
    
<div class="contents">
<section id="introduction" class="level1"><h1>Introduction</h1>
<p>Genetic algorithms (GAs) are stochastic search algorithms inspired by the basic principles of biological evolution and natural selection. GAs simulate the evolution of living organisms, where the fittest individuals dominate over the weaker ones, by mimicking the biological mechanisms of evolution, such as selection, crossover and mutation.</p>
<p>The R package <strong>GA</strong> provides a collection of general purpose functions for optimization using genetic algorithms. The pakage includes a flexible set of tools for implementing genetic algorithms search in both the continuous and discrete case, whether constrained or not. Users can easily define their own objective function depending on the problem at hand. Several genetic operators are available and can be combined to explore the best settings for the current task. Furthermore, users can define new genetic operators and easily evaluate their performances. Local search using general-purpose optimisation algorithms can be applied stochastically to exploit interesting regions. GAs can be run sequentially or in parallel, using an explicit master-slave parallelisation or a coarse-grain islands approach.</p>
<p>This document gives a quick tour of <strong>GA</strong> (version 3.1) functionalities. It was written in R Markdown, using the <a href="http://cran.r-project.org/package=knitr">knitr</a> package for production. Futher details are provided in the papers Scrucca (2013) and Scrucca (2017). See also <code>help(package="GA")</code> for a list of available functions and methods.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(GA)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">##   ____    _    </a>
<a class="sourceLine" id="cb1-3" data-line-number="3">##  / ___|  / \     Genetic </a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## | |  _  / _ \    Algorithms</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## | |_| |/ ___ \   </a>
<a class="sourceLine" id="cb1-6" data-line-number="6">##  \____/_/   \_\  version 3.1</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">## Type 'citation("GA")' for citing this R package in publications.</a></code></pre></div>
</section><section id="function-optimisation-in-one-dimension" class="level1"><h1>Function optimisation in one dimension</h1>
<p>Consider the function <span class="math inline">\(f(x) = (x^2+x)\cos(x)\)</span> defined over the range <span class="math inline">\(-10 \le x \le 10\)</span>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x)  (x<span class="op">^</span><span class="dv">2</span><span class="op">+</span>x)<span class="op">*</span><span class="kw">cos</span>(x)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">lbound &lt;-<span class="st"> </span><span class="dv">-10</span>; ubound &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">curve</span>(f, <span class="dt">from =</span> lbound, <span class="dt">to =</span> ubound, <span class="dt">n =</span> <span class="dv">1000</span>)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-2-1.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">GA &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, <span class="dt">fitness =</span> f, <span class="dt">lower =</span> <span class="kw">c</span>(<span class="dt">th =</span> lbound), <span class="dt">upper =</span> ubound)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="kw">summary</span>(GA)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## ── Genetic Algorithm ─────────────────────────────────────────────────────────────── </a>
<a class="sourceLine" id="cb3-5" data-line-number="5">## </a>
<a class="sourceLine" id="cb3-6" data-line-number="6">## GA settings: </a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Type                  =  real-valued </a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Population size       =  50 </a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Number of generations =  100 </a>
<a class="sourceLine" id="cb3-10" data-line-number="10">## Elitism               =  2 </a>
<a class="sourceLine" id="cb3-11" data-line-number="11">## Crossover probability =  0.8 </a>
<a class="sourceLine" id="cb3-12" data-line-number="12">## Mutation probability  =  0.1 </a>
<a class="sourceLine" id="cb3-13" data-line-number="13">## Search domain = </a>
<a class="sourceLine" id="cb3-14" data-line-number="14">##        th</a>
<a class="sourceLine" id="cb3-15" data-line-number="15">## lower -10</a>
<a class="sourceLine" id="cb3-16" data-line-number="16">## upper  10</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb3-18" data-line-number="18">## GA results: </a>
<a class="sourceLine" id="cb3-19" data-line-number="19">## Iterations             = 100 </a>
<a class="sourceLine" id="cb3-20" data-line-number="20">## Fitness function value = 47.70562 </a>
<a class="sourceLine" id="cb3-21" data-line-number="21">## Solution = </a>
<a class="sourceLine" id="cb3-22" data-line-number="22">##            th</a>
<a class="sourceLine" id="cb3-23" data-line-number="23">## [1,] 6.560559</a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="kw">plot</span>(GA)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-2-2.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">curve</span>(f, <span class="dt">from =</span> lbound, <span class="dt">to =</span> ubound, <span class="dt">n =</span> <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw">points</span>(GA<span class="op">@</span>solution, GA<span class="op">@</span>fitnessValue, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">pch =</span> <span class="dv">19</span>)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-2-3.png" width="480" style="display: block; margin: auto;"></p>
</section><section id="function-optimisation-in-two-dimensions" class="level1"><h1>Function optimisation in two dimensions</h1>
<p>Consider the <em>Rastrigin function</em>, a non-convex function often used as a test problem for optimization algorithms because it is a difficult problem due to its large number of local minima. In two dimensions it is defined as <span class="math display">\[
f(x_1, x_2) = 20 + x_1^2 + x_2^2 - 10(\cos(2\pi x_1) + \cos(2\pi x_2)),
\]</span> with <span class="math inline">\(x_i \in [-5.12, 5.12]\)</span> for <span class="math inline">\(i=1,2\)</span>. It has a global minimum at <span class="math inline">\((0,0)\)</span> where <span class="math inline">\(f(0,0) = 0\)</span>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">Rastrigin &lt;-<span class="st"> </span><span class="cf">function</span>(x1, x2)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">{</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="dv">20</span> <span class="op">+</span><span class="st"> </span>x1<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>x2<span class="op">^</span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span><span class="dv">10</span><span class="op">*</span>(<span class="kw">cos</span>(<span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>x1) <span class="op">+</span><span class="st"> </span><span class="kw">cos</span>(<span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>x2))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">x1 &lt;-<span class="st"> </span>x2 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="fl">5.12</span>, <span class="fl">5.12</span>, <span class="dt">by =</span> <span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">f &lt;-<span class="st"> </span><span class="kw">outer</span>(x1, x2, Rastrigin)</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="kw"><a href="../reference/persp3D.html">persp3D</a></span>(x1, x2, f, <span class="dt">theta =</span> <span class="dv">50</span>, <span class="dt">phi =</span> <span class="dv">20</span>, <span class="dt">color.palette =</span> bl2gr.colors)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-3-1.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">filled.contour</span>(x1, x2, f, <span class="dt">color.palette =</span> bl2gr.colors)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-3-2.png" width="480" style="display: block; margin: auto;"></p>
<p>A GA minimisation search is obtained as follows (note the minus sign used in the definition of the local fitness function):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">GA &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb7-2" data-line-number="2">         <span class="dt">fitness =</span>  <span class="cf">function</span>(x) <span class="op">-</span><span class="kw">Rastrigin</span>(x[<span class="dv">1</span>], x[<span class="dv">2</span>]),</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">         <span class="dt">lower =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">5.12</span>, <span class="fl">-5.12</span>), <span class="dt">upper =</span> <span class="kw">c</span>(<span class="fl">5.12</span>, <span class="fl">5.12</span>), </a>
<a class="sourceLine" id="cb7-4" data-line-number="4">         <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">1000</span>, <span class="dt">run =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="kw">summary</span>(GA)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## ── Genetic Algorithm ─────────────────────────────────────────────────────────────── </a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb7-8" data-line-number="8">## GA settings: </a>
<a class="sourceLine" id="cb7-9" data-line-number="9">## Type                  =  real-valued </a>
<a class="sourceLine" id="cb7-10" data-line-number="10">## Population size       =  50 </a>
<a class="sourceLine" id="cb7-11" data-line-number="11">## Number of generations =  1000 </a>
<a class="sourceLine" id="cb7-12" data-line-number="12">## Elitism               =  2 </a>
<a class="sourceLine" id="cb7-13" data-line-number="13">## Crossover probability =  0.8 </a>
<a class="sourceLine" id="cb7-14" data-line-number="14">## Mutation probability  =  0.1 </a>
<a class="sourceLine" id="cb7-15" data-line-number="15">## Search domain = </a>
<a class="sourceLine" id="cb7-16" data-line-number="16">##          x1    x2</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">## lower -5.12 -5.12</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">## upper  5.12  5.12</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb7-20" data-line-number="20">## GA results: </a>
<a class="sourceLine" id="cb7-21" data-line-number="21">## Iterations             = 333 </a>
<a class="sourceLine" id="cb7-22" data-line-number="22">## Fitness function value = -1.094358e-07 </a>
<a class="sourceLine" id="cb7-23" data-line-number="23">## Solution = </a>
<a class="sourceLine" id="cb7-24" data-line-number="24">##                x1            x2</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">## [1,] 2.148747e-05 -9.477139e-06</a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="kw">plot</span>(GA)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">filled.contour</span>(x1, x2, f, <span class="dt">color.palette =</span> bl2gr.colors, </a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">plot.axes =</span> { <span class="kw">axis</span>(<span class="dv">1</span>); <span class="kw">axis</span>(<span class="dv">2</span>); </a>
<a class="sourceLine" id="cb8-3" data-line-number="3">                <span class="kw">points</span>(GA<span class="op">@</span>solution[,<span class="dv">1</span>], GA<span class="op">@</span>solution[,<span class="dv">2</span>], </a>
<a class="sourceLine" id="cb8-4" data-line-number="4">                       <span class="dt">pch =</span> <span class="dv">3</span>, <span class="dt">cex =</span> <span class="dv">2</span>, <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">lwd =</span> <span class="dv">2</span>) }</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-5-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The GA search process can be visualised by defining a monitoring function as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">monitor &lt;-<span class="st"> </span><span class="cf">function</span>(obj) </a>
<a class="sourceLine" id="cb9-2" data-line-number="2">{ </a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  <span class="kw">contour</span>(x1, x2, f, <span class="dt">drawlabels =</span> <span class="ot">FALSE</span>, <span class="dt">col =</span> <span class="kw">grey</span>(<span class="fl">0.5</span>))</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">  <span class="kw">title</span>(<span class="kw">paste</span>(<span class="st">"iteration ="</span>, obj<span class="op">@</span>iter), <span class="dt">font.main =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">  <span class="kw">points</span>(obj<span class="op">@</span>population, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">col =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  <span class="kw">Sys.sleep</span>(<span class="fl">0.2</span>)</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"></a>
<a class="sourceLine" id="cb9-9" data-line-number="9">GA &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb9-10" data-line-number="10">         <span class="dt">fitness =</span>  <span class="cf">function</span>(x) <span class="op">-</span><span class="kw">Rastrigin</span>(x[<span class="dv">1</span>], x[<span class="dv">2</span>]),</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">         <span class="dt">lower =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">5.12</span>, <span class="fl">-5.12</span>), <span class="dt">upper =</span> <span class="kw">c</span>(<span class="fl">5.12</span>, <span class="fl">5.12</span>), </a>
<a class="sourceLine" id="cb9-12" data-line-number="12">         <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, </a>
<a class="sourceLine" id="cb9-13" data-line-number="13">         <span class="dt">monitor =</span> monitor)</a></code></pre></div>
</section><section id="constrained-optimisation" class="level1"><h1>Constrained optimisation</h1>
<p>This example shows how to minimize an objective function subject to nonlinear inequality constraints and bounds using GAs. Source: <a href="http://www.mathworks.it/it/help/gads/examples/constrained-minimization-using-the-genetic-algorithm.html" class="uri">http://www.mathworks.it/it/help/gads/examples/constrained-minimization-using-the-genetic-algorithm.html</a></p>
<p>We want to minimize a simple function of two variables <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span> <span class="math display">\[
\min_x f(x) = 100 (x_1^2 - x_2)^2 + (1 - x_1)^2;
\]</span> subject to the following nonlinear inequality constraints and bounds:</p>
<ul>
<li>
<span class="math inline">\(x_1x_2 + x_1 - x_2 + 1.5 \le 0\)</span> (<em>inequality constraint</em>),<br>
</li>
<li>
<span class="math inline">\(10 - x_1x_2 \le 0\)</span> (<em>inequality constraint</em>),<br>
</li>
<li>
<span class="math inline">\(0 \le x1 \le 1\)</span> (<em>bounds</em>), and<br>
</li>
<li>
<span class="math inline">\(0 \le x2 \le 13\)</span> (<em>bounds</em>).</li>
</ul>
<p>The above fitness function is known as “cam” as described in L.C.W. Dixon and G.P. Szego (eds.), <strong>Towards Global Optimisation 2</strong>, North-Holland, Amsterdam, 1978.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  { <span class="dv">100</span> <span class="op">*</span><span class="st"> </span>(x[<span class="dv">1</span>]<span class="op">^</span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">2</span>])<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">1</span>])<span class="op">^</span><span class="dv">2</span> }</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"></a>
<a class="sourceLine" id="cb10-4" data-line-number="4">c1 &lt;-<span class="st"> </span><span class="cf">function</span>(x) </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  { x[<span class="dv">1</span>]<span class="op">*</span>x[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>x[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>x[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span><span class="fl">1.5</span> }</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">c2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) </a>
<a class="sourceLine" id="cb10-8" data-line-number="8">  { <span class="dv">10</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">1</span>]<span class="op">*</span>x[<span class="dv">2</span>] }</a></code></pre></div>
<p>Plot the function and the feasible regions (coloured areas):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">ngrid &lt;-<span class="st"> </span><span class="dv">250</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">x1 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">length =</span> ngrid)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">x2 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">13</span>, <span class="dt">length =</span> ngrid)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">x12 &lt;-<span class="st"> </span><span class="kw">expand.grid</span>(x1, x2)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">col &lt;-<span class="st"> </span><span class="kw">adjustcolor</span>(<span class="kw"><a href="../reference/palettes.html">bl2gr.colors</a></span>(<span class="dv">4</span>)[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">alpha =</span> <span class="fl">0.2</span>)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="kw">plot</span>(x1, x2, <span class="dt">type =</span> <span class="st">"n"</span>, <span class="dt">xaxs =</span> <span class="st">"i"</span>, <span class="dt">yaxs =</span> <span class="st">"i"</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="kw">image</span>(x1, x2, <span class="kw">matrix</span>(<span class="kw">ifelse</span>(<span class="kw">apply</span>(x12, <span class="dv">1</span>, c1) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, <span class="ot">NA</span>), ngrid, ngrid), </a>
<a class="sourceLine" id="cb11-8" data-line-number="8">      <span class="dt">col =</span> col[<span class="dv">1</span>], <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="kw">image</span>(x1, x2, <span class="kw">matrix</span>(<span class="kw">ifelse</span>(<span class="kw">apply</span>(x12, <span class="dv">1</span>, c2) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, <span class="ot">NA</span>), ngrid, ngrid), </a>
<a class="sourceLine" id="cb11-10" data-line-number="10">      <span class="dt">col =</span> col[<span class="dv">2</span>], <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="kw">contour</span>(x1, x2, <span class="kw">matrix</span>(<span class="kw">apply</span>(x12, <span class="dv">1</span>, f), ngrid, ngrid), </a>
<a class="sourceLine" id="cb11-12" data-line-number="12">        <span class="dt">nlevels =</span> <span class="dv">21</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-8-1.png" width="480" style="display: block; margin: auto;"></p>
<p>MATLAB solution:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.8122</span>, <span class="fl">12.3104</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">f</span>(x)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## [1] 13573.99</a></code></pre></div>
<p>However, note that the provided solution does not satisfy the inequality constraints:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">c1</span>(x)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">## [1] 0.00030688</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">c2</span>(x)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">## [1] 0.00149312</a></code></pre></div>
<p>A GA solution can be obtained by defining a penalised fitness function:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">fitness &lt;-<span class="st"> </span><span class="cf">function</span>(x) </a>
<a class="sourceLine" id="cb14-2" data-line-number="2">{ </a>
<a class="sourceLine" id="cb14-3" data-line-number="3">  f &lt;-<span class="st"> </span><span class="op">-</span><span class="kw">f</span>(x)                         <span class="co"># we need to maximise -f(x)</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">  pen &lt;-<span class="st"> </span><span class="kw">sqrt</span>(.Machine<span class="op">$</span>double.xmax)  <span class="co"># penalty term</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">  penalty1 &lt;-<span class="st"> </span><span class="kw">max</span>(<span class="kw">c1</span>(x),<span class="dv">0</span>)<span class="op">*</span>pen       <span class="co"># penalisation for 1st inequality constraint</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  penalty2 &lt;-<span class="st"> </span><span class="kw">max</span>(<span class="kw">c2</span>(x),<span class="dv">0</span>)<span class="op">*</span>pen       <span class="co"># penalisation for 2nd inequality constraint</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7">  f <span class="op">-</span><span class="st"> </span>penalty1 <span class="op">-</span><span class="st"> </span>penalty2            <span class="co"># fitness function value</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8">}</a></code></pre></div>
<p>Then</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">GA &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="st">"real-valued"</span>, <span class="dt">fitness =</span> fitness, </a>
<a class="sourceLine" id="cb15-2" data-line-number="2">         <span class="dt">lower =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">upper =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">13</span>), </a>
<a class="sourceLine" id="cb15-3" data-line-number="3">         <span class="dt">maxiter =</span> <span class="dv">1000</span>, <span class="dt">run =</span> <span class="dv">200</span>, <span class="dt">seed =</span> <span class="dv">123</span>)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">summary</span>(GA)</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## ── Genetic Algorithm ─────────────────────────────────────────────────────────────── </a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## </a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## GA settings: </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Type                  =  real-valued </a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Population size       =  50 </a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Number of generations =  1000 </a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Elitism               =  2 </a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Crossover probability =  0.8 </a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Mutation probability  =  0.1 </a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Search domain = </a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       x1 x2</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## lower  0  0</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">## upper  1 13</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## GA results: </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## Iterations             = 227 </a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## Fitness function value = -13580.44 </a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Solution = </a>
<a class="sourceLine" id="cb15-23" data-line-number="23">##             x1       x2</a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## [1,] 0.8121729 12.31312</a>
<a class="sourceLine" id="cb15-25" data-line-number="25"></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="kw">fitness</span>(GA<span class="op">@</span>solution)</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## [1] -13580.44</a>
<a class="sourceLine" id="cb15-28" data-line-number="28"><span class="kw">f</span>(GA<span class="op">@</span>solution)</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## [1] 13580.44</a>
<a class="sourceLine" id="cb15-30" data-line-number="30"><span class="kw">c1</span>(GA<span class="op">@</span>solution)</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">## [1] -0.0005660245</a>
<a class="sourceLine" id="cb15-32" data-line-number="32"><span class="kw">c2</span>(GA<span class="op">@</span>solution)</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">## [1] -0.0003848102</a></code></pre></div>
<p>A graph showing the solution found is obtained as:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">plot</span>(x1, x2, <span class="dt">type =</span> <span class="st">"n"</span>, <span class="dt">xaxs =</span> <span class="st">"i"</span>, <span class="dt">yaxs =</span> <span class="st">"i"</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">image</span>(x1, x2, <span class="kw">matrix</span>(<span class="kw">ifelse</span>(<span class="kw">apply</span>(x12, <span class="dv">1</span>, c1) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, <span class="ot">NA</span>), ngrid, ngrid), </a>
<a class="sourceLine" id="cb16-3" data-line-number="3">      <span class="dt">col =</span> col[<span class="dv">1</span>], <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="kw">image</span>(x1, x2, <span class="kw">matrix</span>(<span class="kw">ifelse</span>(<span class="kw">apply</span>(x12, <span class="dv">1</span>, c2) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, <span class="ot">NA</span>), ngrid, ngrid), </a>
<a class="sourceLine" id="cb16-5" data-line-number="5">      <span class="dt">col =</span> col[<span class="dv">2</span>], <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="kw">contour</span>(x1, x2, <span class="kw">matrix</span>(<span class="kw">apply</span>(x12, <span class="dv">1</span>, f), ngrid, ngrid), </a>
<a class="sourceLine" id="cb16-7" data-line-number="7">        <span class="dt">nlevels =</span> <span class="dv">21</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="kw">points</span>(GA<span class="op">@</span>solution[<span class="dv">1</span>], GA<span class="op">@</span>solution[<span class="dv">2</span>], <span class="dt">col =</span> <span class="st">"dodgerblue3"</span>, <span class="dt">pch =</span> <span class="dv">3</span>)  <span class="co"># GA solution</span></a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-13-1.png" width="480" style="display: block; margin: auto;"></p>
</section><section id="hybrid-gas" class="level1"><h1>Hybrid GAs</h1>
<p>Hybrid Genetic Algorithms (HGAs) incorporate efficient local search algorithms into GAs. In case of real-valued optimisation problems, the <strong>GA</strong> package provides a simple way to start local searches from GA solutions after a certain number of iterations, so that, once a promising region is identified, the convergence to the global optimum can be speed up.</p>
<p>The use of HGAs is controlled by the optional argument <code>optim = TRUE</code> (by default is set to <code>FALSE</code>). Local searches are executed using the base R function <code>optim()</code>, which makes available general-purpose optimisation methods, such as Nelder–Mead, quasi-Newton with and without box constraints, and conjugate-gradient algorithms. The local search method to be used and other parameters are controlled with the optional argument <code>optimArgs</code>, which must be a list with the following structure and defaults:</p>
<pre><code>optimArgs = list(method = "L-BFGS-B", 
                 poptim = 0.05,
                 pressel = 0.5,
                 control = list(fnscale = -1, maxit = 100))</code></pre>
<p>For more details see <code>help(ga)</code>.</p>
<p>Consider again the two-dimensional <em>Rastrigin function</em> defined previously. A HGA search is obtained as follows:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">GA &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb18-2" data-line-number="2">         <span class="dt">fitness =</span>  <span class="cf">function</span>(x) <span class="op">-</span><span class="kw">Rastrigin</span>(x[<span class="dv">1</span>], x[<span class="dv">2</span>]),</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">         <span class="dt">lower =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">5.12</span>, <span class="fl">-5.12</span>), <span class="dt">upper =</span> <span class="kw">c</span>(<span class="fl">5.12</span>, <span class="fl">5.12</span>), </a>
<a class="sourceLine" id="cb18-4" data-line-number="4">         <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">1000</span>, <span class="dt">run =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">         <span class="dt">optim =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="kw">summary</span>(GA)</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## ── Genetic Algorithm ─────────────────────────────────────────────────────────────── </a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## GA settings: </a>
<a class="sourceLine" id="cb18-10" data-line-number="10">## Type                  =  real-valued </a>
<a class="sourceLine" id="cb18-11" data-line-number="11">## Population size       =  50 </a>
<a class="sourceLine" id="cb18-12" data-line-number="12">## Number of generations =  1000 </a>
<a class="sourceLine" id="cb18-13" data-line-number="13">## Elitism               =  2 </a>
<a class="sourceLine" id="cb18-14" data-line-number="14">## Crossover probability =  0.8 </a>
<a class="sourceLine" id="cb18-15" data-line-number="15">## Mutation probability  =  0.1 </a>
<a class="sourceLine" id="cb18-16" data-line-number="16">## Search domain = </a>
<a class="sourceLine" id="cb18-17" data-line-number="17">##          x1    x2</a>
<a class="sourceLine" id="cb18-18" data-line-number="18">## lower -5.12 -5.12</a>
<a class="sourceLine" id="cb18-19" data-line-number="19">## upper  5.12  5.12</a>
<a class="sourceLine" id="cb18-20" data-line-number="20">## </a>
<a class="sourceLine" id="cb18-21" data-line-number="21">## GA results: </a>
<a class="sourceLine" id="cb18-22" data-line-number="22">## Iterations             = 131 </a>
<a class="sourceLine" id="cb18-23" data-line-number="23">## Fitness function value = 0 </a>
<a class="sourceLine" id="cb18-24" data-line-number="24">## Solution = </a>
<a class="sourceLine" id="cb18-25" data-line-number="25">##      x1 x2</a>
<a class="sourceLine" id="cb18-26" data-line-number="26">## [1,]  0  0</a>
<a class="sourceLine" id="cb18-27" data-line-number="27"><span class="kw">plot</span>(GA)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-14-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Note the improved solution obtained.</p>
</section><section id="parallel-computing" class="level1"><h1>Parallel computing</h1>
<p>By default searches performed using the <strong>GA</strong> package occour sequentially. In some cases, particularly when the evaluation of the fitness function is time consuming, parallelisation of the search algorithm may be able to speedup computing time. Starting with version 2.0, the <strong>GA</strong> package provides facilities for implementing parallelisation of genetic algorithms.</p>
<p>Parallel computing with <strong>GA</strong> requires the following packages to be installed: <strong>parallel</strong> (available in base R), <a href="http://cran.r-project.org/package=doParallel">doParallel</a>, <a href="http://cran.r-project.org/package=foreach">foreach</a>, and <a href="http://cran.r-project.org/package=iterators">iterators</a>.</p>
<p>To use parallel computing with the <strong>GA</strong> package on a <em>single machine with multiple cores</em> is simple as manipulating the optional argument <code>parallel</code> in the <code><a href="../reference/ga.html">ga()</a></code> function call.</p>
<p>The argument <code>parallel</code> can be a logical argument specifying if parallel computing should be used (<code>TRUE</code>) or not (<code>FALSE</code>, default) for evaluating the fitness function. This argument could also be used to specify the number of cores to employ; by default, this is taken from <code>detectCores()</code> function in <strong>parallel</strong> package.</p>
<p>Two types of parallel functionality are implemented depending on system OS: on Windows only <em>snow</em> type functionality is available, while on POSIX operating systems, such as Unix, GNU/Linux, and Mac OSX, both <em>snow</em> and <em>multicore</em> (default) functionalities are available. In the latter case a string can be used to specify which parallelisation method should be used.</p>
<p>In all cases described above, at the end of GA iterations the cluster is automatically stopped by shutting down the workers.</p>
<p>Consider the following simple example where a pause statement is introduced to simulate an expensive fitness function.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">library</span>(GA)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">fitness &lt;-<span class="st"> </span><span class="cf">function</span>(x)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">{</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">  <span class="kw">Sys.sleep</span>(<span class="fl">0.01</span>)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">  x<span class="op">*</span><span class="kw">runif</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="kw">library</span>(rbenchmark)</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">out &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/rbenchmark/topics/benchmark">benchmark</a></span>(<span class="dt">GA1 =</span> <span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">                          <span class="dt">fitness =</span> fitness, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb19-11" data-line-number="11">                          <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">                          <span class="dt">seed =</span> <span class="dv">12345</span>),</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">                 <span class="dt">GA2 =</span> <span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb19-14" data-line-number="14">                          <span class="dt">fitness =</span> fitness, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">                          <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">                          <span class="dt">seed =</span> <span class="dv">12345</span>, <span class="dt">parallel =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb19-17" data-line-number="17">                 <span class="dt">GA3 =</span> <span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">                          <span class="dt">fitness =</span> fitness, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb19-19" data-line-number="19">                          <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb19-20" data-line-number="20">                          <span class="dt">seed =</span> <span class="dv">12345</span>, <span class="dt">parallel =</span> <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb19-21" data-line-number="21">                 <span class="dt">GA4 =</span> <span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb19-22" data-line-number="22">                          <span class="dt">fitness =</span> fitness, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb19-23" data-line-number="23">                          <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb19-24" data-line-number="24">                          <span class="dt">seed =</span> <span class="dv">12345</span>, <span class="dt">parallel =</span> <span class="st">"snow"</span>),</a>
<a class="sourceLine" id="cb19-25" data-line-number="25">                 <span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">"test"</span>, <span class="st">"replications"</span>, <span class="st">"elapsed"</span>, <span class="st">"relative"</span>),</a>
<a class="sourceLine" id="cb19-26" data-line-number="26">                 <span class="dt">order =</span> <span class="st">"test"</span>, </a>
<a class="sourceLine" id="cb19-27" data-line-number="27">                 <span class="dt">replications =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb19-28" data-line-number="28">out<span class="op">$</span>average &lt;-<span class="st"> </span><span class="kw">with</span>(out, average &lt;-<span class="st"> </span>elapsed<span class="op">/</span>replications)</a>
<a class="sourceLine" id="cb19-29" data-line-number="29">out[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">4</span>)]</a></code></pre></div>
<pre><code>#   test replications elapsed average relative
# 1  GA1           10 565.075 56.5075    3.975
# 2  GA2           10 142.174 14.2174    1.000
# 3  GA3           10 263.285 26.3285    1.852
# 4  GA4           10 155.777 15.5777    1.096</code></pre>
<p>The results above have been obtained on an iMac, Intel Core i5 at 2.8GHz, with 4 cores and 16 GB RAM, running OSX 10.11.</p>
<p>If a <em>cluster of multiple machines</em> is available, <code><a href="../reference/ga.html">ga()</a></code> can be executed in parallel using all, or a subset of, the cores available to the machines belonging to the cluster. However, this option requires more work from the user, who needs to set up and register a parallel back end.</p>
<p>For instance, suppose that we want to create a cluster of two computers having IP addresses <code>141.250.100.1</code> and <code>141.250.105.3</code>, respectively. For each computer we require 8 cores, so we aim at having a cluster of 16 cores evenly distributed on the two machines. Note that comunication between the master worker and the cluster nodes is done via SSH, so you should configure ssh to use password-less login. For more details see McCallum and Weston (2011, Chapter 2).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">library</span>(doParallel)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">workers &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">"141.250.100.1"</span>, <span class="st">"141.250.105.3"</span>), <span class="dt">each =</span> <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(workers, <span class="dt">type =</span> <span class="st">"PSOCK"</span>)</a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="kw"><a href="http://www.rdocumentation.org/packages/doParallel/topics/registerDoParallel">registerDoParallel</a></span>(cl)</a></code></pre></div>
<p>The code above defines a vector of <code>workers</code> containing the IP address for each node of the cluster. This is used by <code>makeCluster()</code> to create a <em>PSOCK Snow cluster</em> object named <code>cl</code>. At this point, objects and functions, but also R packages, required during the evaluation of fitness function must be <em>exported</em> along the nodes of the cluster. For example, the following code export the vector <code>x</code>, the fitness function <code>fun</code>, and load the R package <code>mclust</code>, on each node of the socket cluster:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">clusterExport</span>(cl, <span class="dt">varlist =</span> <span class="kw">c</span>(<span class="st">"x"</span>, <span class="st">"fun"</span>))</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">clusterCall</span>(cl, library, <span class="dt">package =</span> <span class="st">"mclust"</span>, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>At this point a <code><a href="../reference/ga.html">ga()</a></code> function call can be executed by providing the argument <code>parallel = cl</code>. For instance:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">GA5 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb23-2" data-line-number="2">          <span class="dt">fitness =</span> fitness, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">          <span class="dt">popSize =</span> <span class="dv">50</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">          <span class="dt">seed =</span> <span class="dv">12345</span>, <span class="dt">parallel =</span> cl)</a></code></pre></div>
<p>Note that in this case the cluster must be explicitely stopped with the command:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">stopCluster</span>(cl)</a></code></pre></div>
</section><section id="island-evolution" class="level1"><h1>Island evolution</h1>
<p>GAs can be designed to evolve using an Island evolution approach. Here the population is partitioned in a set of subpopulations (islands) in which isolated GAs are executed on separated processor runs. Occasionally, some individuals from an island migrate to another island, thus allowing subpopulations to share genetic material</p>
<p>This approach is implemented in the <code><a href="../reference/gaisl.html">gaisl()</a></code> function, which has the same input arguments as the <code><a href="../reference/ga.html">ga()</a></code> function, with the addition of the following argument:</p>
<ul>
<li><p><code>numIslands</code>: an integer value specifying the number of islands to use (by default is set to 4)</p></li>
<li><p><code>migrationRate</code>: a value in the range (0,1) which gives the proportion of individuals that undergo migration between islands in every exchange (by default equal to 0.10)</p></li>
<li><p><code>migrationInterval</code>: an integer value specifying the number of iterations at which exchange of individuals takes place (by default set at 10).</p></li>
</ul>
<p>Parallel computing is used by default in the Island evolution approach. Hybridisation by local search is also available as discussed previously.</p>
<p>As an example, consider again the two-dimensional <em>Rastrigin function</em>. An Island GA search is obtained as follows:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">GA &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gaisl.html">gaisl</a></span>(<span class="dt">type =</span> <span class="st">"real-valued"</span>, </a>
<a class="sourceLine" id="cb25-2" data-line-number="2">            <span class="dt">fitness =</span>  <span class="cf">function</span>(x) <span class="op">-</span><span class="kw">Rastrigin</span>(x[<span class="dv">1</span>], x[<span class="dv">2</span>]),</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">            <span class="dt">lower =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">5.12</span>, <span class="fl">-5.12</span>), <span class="dt">upper =</span> <span class="kw">c</span>(<span class="fl">5.12</span>, <span class="fl">5.12</span>), </a>
<a class="sourceLine" id="cb25-4" data-line-number="4">            <span class="dt">popSize =</span> <span class="dv">100</span>, </a>
<a class="sourceLine" id="cb25-5" data-line-number="5">            <span class="dt">maxiter =</span> <span class="dv">1000</span>, <span class="dt">run =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">            <span class="dt">numIslands =</span> <span class="dv">4</span>, </a>
<a class="sourceLine" id="cb25-7" data-line-number="7">            <span class="dt">migrationRate =</span> <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">            <span class="dt">migrationInterval =</span> <span class="dv">50</span>)</a></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">summary</span>(GA)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">## ── Islands Genetic Algorithm ─────────────────────────────────────────────────────── </a>
<a class="sourceLine" id="cb26-3" data-line-number="3">## </a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## GA settings: </a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Type                  =  real-valued </a>
<a class="sourceLine" id="cb26-6" data-line-number="6">## Number of islands     =  4 </a>
<a class="sourceLine" id="cb26-7" data-line-number="7">## Islands pop. size     =  25 </a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## Migration rate        =  0.2 </a>
<a class="sourceLine" id="cb26-9" data-line-number="9">## Migration interval    =  50 </a>
<a class="sourceLine" id="cb26-10" data-line-number="10">## Elitism               =  1 </a>
<a class="sourceLine" id="cb26-11" data-line-number="11">## Crossover probability =  0.8 </a>
<a class="sourceLine" id="cb26-12" data-line-number="12">## Mutation probability  =  0.1 </a>
<a class="sourceLine" id="cb26-13" data-line-number="13">## Search domain = </a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##          x1    x2</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">## lower -5.12 -5.12</a>
<a class="sourceLine" id="cb26-16" data-line-number="16">## upper  5.12  5.12</a>
<a class="sourceLine" id="cb26-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb26-18" data-line-number="18">## GA results: </a>
<a class="sourceLine" id="cb26-19" data-line-number="19">## Iterations              = 550 </a>
<a class="sourceLine" id="cb26-20" data-line-number="20">## Epochs                  = 11 </a>
<a class="sourceLine" id="cb26-21" data-line-number="21">## Fitness function values = -4.856666e-10 -4.856666e-10 -4.856666e-10 -4.856666e-10 </a>
<a class="sourceLine" id="cb26-22" data-line-number="22">## Solutions = </a>
<a class="sourceLine" id="cb26-23" data-line-number="23">##                x1            x2</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">## [1,] 2.980232e-08 -1.564622e-06</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">## [2,] 2.980232e-08 -1.564622e-06</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">## [3,] 2.561063e-08 -1.564402e-06</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">## [4,] 2.561063e-08 -1.564402e-06</a>
<a class="sourceLine" id="cb26-28" data-line-number="28"><span class="kw">plot</span>(GA, <span class="dt">log =</span> <span class="st">"x"</span>)</a></code></pre></div>
<p><img src="GA_files/figure-html/unnamed-chunk-22-1.png" width="480" style="display: block; margin: auto;"></p>
</section><section id="memoization" class="level1"><h1>Memoization</h1>
<p>In certain circumstances, particularly with binary GAs, <a href="https://en.wikipedia.org/wiki/Memoization">memoization</a> can be used to speed up calculations by using cached results. This is easily obtained using the <a href="http://cran.r-project.org/package=memoise">memoise</a> package.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">data</span>(fat, <span class="dt">package =</span> <span class="st">"UsingR"</span>)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2">mod &lt;-<span class="st"> </span><span class="kw">lm</span>(body.fat.siri <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>weight <span class="op">+</span><span class="st"> </span>height <span class="op">+</span><span class="st"> </span>neck <span class="op">+</span><span class="st"> </span>chest <span class="op">+</span><span class="st"> </span>abdomen <span class="op">+</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="st">          </span>hip <span class="op">+</span><span class="st"> </span>thigh <span class="op">+</span><span class="st"> </span>knee <span class="op">+</span><span class="st"> </span>ankle <span class="op">+</span><span class="st"> </span>bicep <span class="op">+</span><span class="st"> </span>forearm <span class="op">+</span><span class="st"> </span>wrist, <span class="dt">data =</span> fat)</a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="kw">summary</span>(mod)</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">x &lt;-<span class="st"> </span><span class="kw">model.matrix</span>(mod)[,<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">y &lt;-<span class="st"> </span><span class="kw">model.response</span>(mod<span class="op">$</span>model)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7"></a>
<a class="sourceLine" id="cb27-8" data-line-number="8">fitness &lt;-<span class="st"> </span><span class="cf">function</span>(string)</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">{ </a>
<a class="sourceLine" id="cb27-10" data-line-number="10">  mod &lt;-<span class="st"> </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x[,string<span class="op">==</span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">  <span class="op">-</span><span class="kw">BIC</span>(mod)</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb27-13" data-line-number="13"></a>
<a class="sourceLine" id="cb27-14" data-line-number="14"><span class="kw">library</span>(memoise)</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">mfitness &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/memoise/topics/memoise">memoise</a></span>(fitness)</a>
<a class="sourceLine" id="cb27-16" data-line-number="16"></a>
<a class="sourceLine" id="cb27-17" data-line-number="17"><span class="kw"><a href="http://www.rdocumentation.org/packages/memoise/topics/is.memoised">is.memoised</a></span>(fitness)</a></code></pre></div>
<pre><code># [1] FALSE</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="http://www.rdocumentation.org/packages/memoise/topics/is.memoised">is.memoised</a></span>(mfitness)</a></code></pre></div>
<pre><code># [1] TRUE</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">library</span>(rbenchmark)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">tab &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/rbenchmark/topics/benchmark">benchmark</a></span>(<span class="dt">GA1 =</span> <span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="st">"binary"</span>, <span class="dt">fitness =</span> fitness, <span class="dt">nBits =</span> <span class="kw">ncol</span>(x), </a>
<a class="sourceLine" id="cb31-3" data-line-number="3">                          <span class="dt">popSize =</span> <span class="dv">100</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">seed =</span> <span class="dv">1</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb31-4" data-line-number="4">                 <span class="dt">GA2 =</span> <span class="kw"><a href="../reference/ga.html">ga</a></span>(<span class="st">"binary"</span>, <span class="dt">fitness =</span> mfitness, <span class="dt">nBits =</span> <span class="kw">ncol</span>(x), </a>
<a class="sourceLine" id="cb31-5" data-line-number="5">                          <span class="dt">popSize =</span> <span class="dv">100</span>, <span class="dt">maxiter =</span> <span class="dv">100</span>, <span class="dt">seed =</span> <span class="dv">1</span>, <span class="dt">monitor =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb31-6" data-line-number="6">                 <span class="dt">columns =</span> <span class="kw">c</span>(<span class="st">"test"</span>, <span class="st">"replications"</span>, <span class="st">"elapsed"</span>, <span class="st">"relative"</span>), </a>
<a class="sourceLine" id="cb31-7" data-line-number="7">                 <span class="dt">replications =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb31-8" data-line-number="8">tab<span class="op">$</span>average &lt;-<span class="st"> </span><span class="kw">with</span>(tab, elapsed<span class="op">/</span>replications)</a>
<a class="sourceLine" id="cb31-9" data-line-number="9">tab</a></code></pre></div>
<pre><code>#   test replications elapsed relative average
# 1  GA1           10  59.071    5.673  5.9071
# 2  GA2           10  10.413    1.000  1.0413</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># To clear cache use</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw"><a href="http://www.rdocumentation.org/packages/memoise/topics/forget">forget</a></span>(mfitness)</a></code></pre></div>
<hr>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">## R version 3.4.3 (2017-11-30)</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">## Platform: x86_64-apple-darwin15.6.0 (64-bit)</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">## Running under: macOS Sierra 10.12.5</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">## </a>
<a class="sourceLine" id="cb34-6" data-line-number="6">## Matrix products: default</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">## BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">## LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb34-10" data-line-number="10">## locale:</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">## </a>
<a class="sourceLine" id="cb34-13" data-line-number="13">## attached base packages:</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">## [1] stats     graphics  grDevices utils     datasets  methods   base     </a>
<a class="sourceLine" id="cb34-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb34-16" data-line-number="16">## other attached packages:</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">## [1] GA_3.1          iterators_1.0.9 foreach_1.4.4   knitr_1.19     </a>
<a class="sourceLine" id="cb34-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb34-19" data-line-number="19">## loaded via a namespace (and not attached):</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">##  [1] Rcpp_0.12.15     codetools_0.2-15 crayon_1.3.4     assertthat_0.2.0</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">##  [5] digest_0.6.15    rprojroot_1.3-2  backports_1.1.2  magrittr_1.5    </a>
<a class="sourceLine" id="cb34-22" data-line-number="22">##  [9] evaluate_0.10.1  cli_1.0.0        stringi_1.1.6    rmarkdown_1.8   </a>
<a class="sourceLine" id="cb34-23" data-line-number="23">## [13] tools_3.4.3      stringr_1.2.0    yaml_2.1.16      compiler_3.4.3  </a>
<a class="sourceLine" id="cb34-24" data-line-number="24">## [17] htmltools_0.3.6</a></code></pre></div>
<hr></section><section id="references" class="level1"><h1>References</h1>
<p>McCallum, E. and Weston, S. (2011) <em>Parallel R</em>. O’Reilly Media.</p>
<p>Scrucca, L. (2013) GA: A Package for Genetic Algorithms in R. <em>Journal of Statistical Software</em>, 53/4, 1-37. URL <a href="http://www.jstatsoft.org/v53/i04/" class="uri">http://www.jstatsoft.org/v53/i04/</a></p>
<p>Scrucca, L. (2017) On some extensions to GA package: hybrid optimisation, parallelisation and islands evolution. <em>The R Journal</em>, 9/1, 187–206. <a href="https://journal.r-project.org/archive/2017/RJ-2017-008" class="uri">https://journal.r-project.org/archive/2017/RJ-2017-008</a></p>
</section>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#function-optimisation-in-one-dimension">Function optimisation in one dimension</a></li>
      <li><a href="#function-optimisation-in-two-dimensions">Function optimisation in two dimensions</a></li>
      <li><a href="#constrained-optimisation">Constrained optimisation</a></li>
      <li><a href="#hybrid-gas">Hybrid GAs</a></li>
      <li><a href="#parallel-computing">Parallel computing</a></li>
      <li><a href="#island-evolution">Island evolution</a></li>
      <li><a href="#memoization">Memoization</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Luca Scrucca.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
